{"ast":null,"code":"import React,{useState,useEffect}from'react';import\"./Topdeals.css\";import{Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Topdeals(props){const{TopDeals,onAddToCart}=props;const calculateTimeLeft=endTime=>{const now=new Date();const timeLeft=endTime-now;return{days:Math.floor(timeLeft/(1000*60*60*24)),hours:Math.floor(timeLeft/(1000*60*60)%24),minutes:Math.floor(timeLeft/1000/60%60),seconds:Math.floor(timeLeft/1000%60)};};const[timeLeft,setTimeLeft]=useState(()=>{if(TopDeals&&TopDeals.length>0){return TopDeals.map(deal=>{const endTime=new Date();endTime.setDate(endTime.getDate()+deal.daysleft);return calculateTimeLeft(endTime);});}return[];});useEffect(()=>{if(TopDeals&&TopDeals.length>0){const endTimeList=TopDeals.map(deal=>{const endTime=new Date();endTime.setDate(endTime.getDate()+deal.daysleft);return endTime;});const timer=setInterval(()=>{setTimeLeft(prevTimeLeft=>{return endTimeList.map((endTime,index)=>{if(endTime){return calculateTimeLeft(endTime);}else{return{days:0,hours:0,minutes:0,seconds:0};}});});},1000);return()=>clearInterval(timer);}},[TopDeals]);if(!TopDeals||TopDeals.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"spinner-loader\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"top-deals col-12 col-lg-12\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"deals-heading\",children:\"Top Deals Of The Day\"}),/*#__PURE__*/_jsx(\"hr\",{}),TopDeals.map((item,index)=>{var _timeLeft$index,_timeLeft$index2,_timeLeft$index3,_timeLeft$index4;return/*#__PURE__*/_jsxs(\"div\",{className:\"item-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"discount2\",children:[\"-\",item.discount,\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"image-container\",children:/*#__PURE__*/_jsxs(Link,{to:\"/product/\".concat(item._id),children:[/*#__PURE__*/_jsx(\"img\",{src:item.imageUrl,alt:item.title,className:\"deal-image\"}),/*#__PURE__*/_jsx(\"img\",{src:item.imageHoverUrl,alt:item.title,className:\"deal-image-hover\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"specifications\",children:[/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item._id),className:\"product-title-link\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"item-title\",children:item.title})}),/*#__PURE__*/_jsxs(\"div\",{className:\"stars\",children:['★'.repeat(5),/*#__PURE__*/_jsxs(\"span\",{className:\"reviews\",children:[\"(\",item.review,\" reviews)\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"price\",children:[\"\\xA3 \",item.price.toFixed(2)]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"specs\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"dot\",children:\".\"}),\" \",item.screen]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"dot\",children:\".\"}),item.os]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"dot\",children:\".\"}),\" \",item.inches]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"countdown d-flex justify-content-around mt-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"days\",children:[((_timeLeft$index=timeLeft[index])===null||_timeLeft$index===void 0?void 0:_timeLeft$index.days)||'0',/*#__PURE__*/_jsx(\"br\",{}),\" days\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"hours\",children:[((_timeLeft$index2=timeLeft[index])===null||_timeLeft$index2===void 0?void 0:_timeLeft$index2.hours)||'0',/*#__PURE__*/_jsx(\"br\",{}),\" hours\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mins\",children:[((_timeLeft$index3=timeLeft[index])===null||_timeLeft$index3===void 0?void 0:_timeLeft$index3.minutes)||'0',\" \",/*#__PURE__*/_jsx(\"br\",{}),\"mins\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"secs\",children:[((_timeLeft$index4=timeLeft[index])===null||_timeLeft$index4===void 0?void 0:_timeLeft$index4.seconds)||'0',/*#__PURE__*/_jsx(\"br\",{}),\" secs\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w3-light-grey\",children:/*#__PURE__*/_jsx(\"div\",{id:\"myBar\",className:\"w3-container w3-center\",style:{width:item.sold+'%'}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"sold\",children:[\"Sold :\",/*#__PURE__*/_jsxs(\"span\",{className:\"percentage\",children:[\" \",item.sold,\"/100 \"]}),\" Products\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"add-to-cart\",onClick:()=>onAddToCart(item),children:\"Add to Cart\"})]})]},item._id);})]});}","map":{"version":3,"names":["React","useState","useEffect","Link","jsx","_jsx","jsxs","_jsxs","Topdeals","props","TopDeals","onAddToCart","calculateTimeLeft","endTime","now","Date","timeLeft","days","Math","floor","hours","minutes","seconds","setTimeLeft","length","map","deal","setDate","getDate","daysleft","endTimeList","timer","setInterval","prevTimeLeft","index","clearInterval","className","children","item","_timeLeft$index","_timeLeft$index2","_timeLeft$index3","_timeLeft$index4","discount","to","concat","_id","src","imageUrl","alt","title","imageHoverUrl","repeat","review","price","toFixed","screen","os","inches","id","style","width","sold","onClick"],"sources":["D:/SGU-Shop-task-files/SGU-Shop/client/src/Components/TopDeals/Topdeals.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport \"./Topdeals.css\";\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport default function Topdeals(props) {\r\n  const { TopDeals, onAddToCart } = props;\r\n\r\n  const calculateTimeLeft = (endTime) => {\r\n    const now = new Date();\r\n    const timeLeft = endTime - now;\r\n\r\n    return {\r\n      days: Math.floor(timeLeft / (1000 * 60 * 60 * 24)),\r\n      hours: Math.floor((timeLeft / (1000 * 60 * 60)) % 24),\r\n      minutes: Math.floor((timeLeft / 1000 / 60) % 60),\r\n      seconds: Math.floor((timeLeft / 1000) % 60),\r\n    };\r\n  };\r\n\r\n  const [timeLeft, setTimeLeft] = useState(() => {\r\n    if (TopDeals && TopDeals.length > 0) {\r\n      return TopDeals.map((deal) => {\r\n        const endTime = new Date();\r\n        endTime.setDate(endTime.getDate() + deal.daysleft);\r\n        return calculateTimeLeft(endTime);\r\n      });\r\n    }\r\n    return [];\r\n  });\r\n\r\n\r\n  useEffect(() => {\r\n    if (TopDeals && TopDeals.length > 0) {\r\n      const endTimeList = TopDeals.map((deal) => {\r\n        const endTime = new Date();\r\n        endTime.setDate(endTime.getDate() + deal.daysleft);\r\n        return endTime;\r\n      });\r\n\r\n      const timer = setInterval(() => {\r\n        setTimeLeft((prevTimeLeft) => {\r\n          return endTimeList.map((endTime, index) => {\r\n            if (endTime) {\r\n              return calculateTimeLeft(endTime);\r\n            } else {\r\n              return { days: 0, hours: 0, minutes: 0, seconds: 0 };\r\n            }\r\n          });\r\n        });\r\n      }, 1000);\r\n\r\n      return () => clearInterval(timer);\r\n    }\r\n  }, [TopDeals]);\r\n\r\n\r\n\r\n  if (!TopDeals || TopDeals.length === 0) {\r\n    return (\r\n      <div className='spinner-loader'>\r\n        <div className='spinner'></div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className='top-deals col-12 col-lg-12'>\r\n      <h2 className='deals-heading'>Top Deals Of The Day</h2>\r\n      <hr></hr>\r\n      {TopDeals.map((item, index) => (\r\n        <div className='item-card' key={item._id}>\r\n          <div className='discount2'>-{item.discount}%</div>\r\n          <div className='image-container'>\r\n            <Link to={`/product/${item._id}`}>\r\n              <img src={item.imageUrl} alt={item.title} className='deal-image' />\r\n              <img src={item.imageHoverUrl} alt={item.title} className='deal-image-hover' />\r\n            </Link>\r\n          </div>\r\n          <div className='specifications'>\r\n            <Link to={`/product/${item._id}`} className='product-title-link'><h3 className='item-title'>{item.title}</h3></Link>\r\n            <div className='stars'>\r\n              {'★'.repeat(5)}\r\n              <span className='reviews'>({item.review} reviews)</span>\r\n            </div>\r\n            <div className='price'>£ {item.price.toFixed(2)}</div>\r\n            <ul className='specs'>\r\n              <li><span className='dot'>.</span> {item.screen}</li>\r\n              <li><span className='dot'>.</span>{item.os}</li>\r\n              <li><span className='dot'>.</span> {item.inches}</li>\r\n            </ul>\r\n            <div className='countdown d-flex justify-content-around mt-5'>\r\n              <div className='days'>\r\n                {timeLeft[index]?.days || '0'}<br /> days\r\n              </div>\r\n              <div className='hours'>\r\n                {timeLeft[index]?.hours || '0'}<br /> hours\r\n              </div>\r\n              <div className='mins'>\r\n                {timeLeft[index]?.minutes || '0'} <br />mins\r\n              </div>\r\n              <div className='secs'>\r\n                {timeLeft[index]?.seconds || '0'}<br /> secs\r\n              </div>\r\n            </div>\r\n            <div className=\"w3-light-grey\">\r\n              <div id=\"myBar\" className=\"w3-container w3-center\" style={{ width: item.sold + '%' }}></div>\r\n            </div>\r\n            <div className='sold'>Sold :<span className='percentage'> {item.sold}/100 </span> Products</div>\r\n            <button className='add-to-cart' onClick={() => onAddToCart(item)}>Add to Cart</button>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}